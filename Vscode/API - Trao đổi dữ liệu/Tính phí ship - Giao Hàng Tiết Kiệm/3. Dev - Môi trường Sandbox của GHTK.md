<br>

MÃ´i trÆ°á»ng **Sandbox** cá»§a GHTK Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ **test tÃ­ch há»£p API** trÆ°á»›c khi triá»ƒn khai lÃªn Production. DÆ°á»›i Ä‘Ã¢y lÃ  hÆ°á»›ng dáº«n chi tiáº¿t cÃ¡ch sá»­ dá»¥ng:

---

### **1. Sandbox dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?**
- **Test API**: Thá»­ nghiá»‡m cÃ¡c chá»©c nÄƒng nhÆ° táº¡o Ä‘Æ¡n hÃ ng, há»§y Ä‘Æ¡n, tÃ­nh phÃ­ váº­n chuyá»ƒn... mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n dá»¯ liá»‡u tháº­t.
- **Kiá»ƒm tra luá»“ng nghiá»‡p vá»¥**: Äáº£m báº£o há»‡ thá»‘ng cá»§a báº¡n xá»­ lÃ½ Ä‘Ãºng cÃ¡c tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng (vÃ­ dá»¥: Ä‘ang giao, Ä‘Ã£ giao, tháº¥t báº¡i...).
- **PhÃ¡t hiá»‡n lá»—i**: TÃ¬m vÃ  sá»­a lá»—i logic, security, performance trÆ°á»›c khi cháº¡y tháº­t.

---

### **2. CÃ¡ch sá»­ dá»¥ng Sandbox**

#### **BÆ°á»›c 1: ÄÄƒng kÃ½ tÃ i khoáº£n Sandbox**
- Truy cáº­p [https://khachhang-staging.ghtklab.com](https://khachhang-staging.ghtklab.com) â†’ ÄÄƒng kÃ½ tÃ i khoáº£n dÃ nh cho mÃ´i trÆ°á»ng thá»­ nghiá»‡m.
- LiÃªn há»‡ GHTK Ä‘á»ƒ Ä‘Æ°á»£c cáº¥p **API Key Sandbox** (thÆ°á»ng gá»­i qua email hoáº·c trong pháº§n quáº£n lÃ½ tÃ i khoáº£n).

#### **BÆ°á»›c 2: Cáº¥u hÃ¬nh API Sandbox**
- Sá»­ dá»¥ng **API Endpoint Sandbox**:  
  `https://services-staging.ghtklab.com`
- ThÃªm header `Token` vá»›i API Key Sandbox vÃ o má»i request.  
  VÃ­ dá»¥:
  ```bash
  curl -H "Token: YOUR_SANDBOX_API_KEY" https://services-staging.ghtklab.com/services/shipment/fee?...
  ```

#### **BÆ°á»›c 3: Test cÃ¡c API cÆ¡ báº£n**
- **Táº¡o Ä‘Æ¡n hÃ ng thá»­**:  
  Gá»i API `POST /services/shipment/order` vá»›i dá»¯ liá»‡u giáº£.  
  VÃ­ dá»¥:
  ```json
  {
    "products": [{
      "name": "Sáº£n pháº©m test",
      "weight": 0.5,
      "quantity": 1
    }],
    "pick_address_id": "test_pick_address",
    "pick_address": "HÃ  Ná»™i",
    "pick_province": "HÃ  Ná»™i",
    "pick_district": "Cáº§u Giáº¥y",
    "pick_ward": "Dá»‹ch Vá»ng",
    "pick_tel": "0912345678",
    "tel": "0912345678",
    "address": "Äá»‹a chá»‰ test TP.HCM",
    "province": "TP.HCM",
    "district": "Quáº­n 1",
    "ward": "PhÆ°á»ng Báº¿n NghÃ©"
  }
  ```

- **TÃ­nh phÃ­ váº­n chuyá»ƒn**:  
  Gá»i API `GET /services/shipment/fee` vá»›i thÃ´ng tin giáº£ Ä‘á»ƒ kiá»ƒm tra phÃ­.

- **Kiá»ƒm tra tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng**:  
  Gá»i API `GET /services/shipment/v2/{order_id}` Ä‘á»ƒ xem tráº¡ng thÃ¡i Ä‘Æ¡n test.

#### **BÆ°á»›c 4: Kiá»ƒm tra dá»¯ liá»‡u trÃªn giao diá»‡n Sandbox**
- ÄÄƒng nháº­p vÃ o [https://khachhang-staging.ghtklab.com](https://khachhang-staging.ghtklab.com) â†’ Xem danh sÃ¡ch Ä‘Æ¡n hÃ ng test, tráº¡ng thÃ¡i, vÃ  log.

---

### **3. Dá»¯ liá»‡u Sandbox cÃ³ gÃ¬ Ä‘áº·c biá»‡t?**
- **DÃ¹ng thÃ´ng tin giáº£**: Äá»‹a chá»‰, SÄT khÃ´ng cáº§n chÃ­nh xÃ¡c (vÃ­ dá»¥: SÄT `0912345678`, Ä‘á»‹a chá»‰ "Test Quáº­n 1").
- **KhÃ´ng tá»‘n phÃ­**: CÃ¡c Ä‘Æ¡n hÃ ng trong Sandbox khÃ´ng tÃ­nh tiá»n tháº­t.
- **Reset Ä‘á»‹nh ká»³**: Dá»¯ liá»‡u Sandbox cÃ³ thá»ƒ bá»‹ xÃ³a sau má»™t khoáº£ng thá»i gian.

---

### **4. LÆ°u Ã½ quan trá»ng**
- **API Key Sandbox â‰  Production**: Äá»«ng dÃ¹ng nháº§m Key giá»¯a 2 mÃ´i trÆ°á»ng.
- **Webhook Sandbox**: Cáº¥u hÃ¬nh URL webhook riÃªng Ä‘á»ƒ nháº­n thÃ´ng bÃ¡o tá»« Sandbox.
- **Giá»›i háº¡n tÃ­nh nÄƒng**: Má»™t sá»‘ tÃ­nh nÄƒng (vÃ­ dá»¥: thanh toÃ¡n) cÃ³ thá»ƒ khÃ´ng kháº£ dá»¥ng trong Sandbox.
- **Chuyá»ƒn sang Production**: Sau khi test xong, thay Ä‘á»•i API Endpoint sang `https://services.giaohangtietkiem.vn` vÃ  dÃ¹ng API Key tháº­t.

---

### **5. Lá»—i thÆ°á»ng gáº·p & CÃ¡ch fix**
- **Lá»—i 401 (Unauthorized)**: Kiá»ƒm tra láº¡i API Key Sandbox vÃ  header `Token`.
- **Lá»—i 400 (Bad Request)**: Äáº£m báº£o body request Ä‘Ãºng format (tham kháº£o [tÃ i liá»‡u GHTK](https://docs.giaohangtietkiem.vn)).
- **KhÃ´ng tháº¥y Ä‘Æ¡n hÃ ng trÃªn giao diá»‡n**: Äáº£m báº£o Ä‘Ã£ Ä‘Äƒng nháº­p Ä‘Ãºng tÃ i khoáº£n Sandbox.

Náº¿u báº¡n cáº§n vÃ­ dá»¥ code cá»¥ thá»ƒ (PHP, Python, JavaScript...), hÃ£y cho mÃ¬nh biáº¿t nhÃ©! ðŸ˜Š

```js
const token = "1J1IbLcnWarryPP1TRHTUtWTKqaonUrOqyBoUD3";  
const token_v2 = '1LHuDeQM3qmC0ghZtHNK5xtVSPJi4kU5SwwAccN';  
const DEV_MOI_TRUONG = "https://services-staging.ghtklab.com";  
const PRODUCT_MOI_TRUONG = "https://services.giaohangtietkiem.vn";  
  
const url = `${DEV_MOI_TRUONG}/services/shipment/fee?address=P.503%20t%C3%B2a%20nh%C3%A0%20Auu%20Vi%E1%BB%87t,%20s%E1%BB%91%201%20L%C3%AA%20%C4%90%E1%BB%A9c%20Th%E1%BB%8D&province=H%C3%A0%20n%E1%BB%99i&district=Qu%E1%BA%ADn%20C%E1%BA%A7u%20Gi%E1%BA%A5y&pick_province=H%C3%A0%20N%E1%BB%99i&pick_district=Qu%E1%BA%ADn%20Hai%20B%C3%A0%20Tr%C6%B0ng&weight=1000&value=3000000&deliver_option=xteam&tags%5B%5D=1`;  
  
fetch(url, {  
Â Â method: "GET",  
Â Â headers: {  
Â Â Â Â Token: token_v2,  
Â Â },  
})  
Â Â .then((response) => response.json())  
Â Â .then((data) => console.log("PhÃ­ váº­n chuyá»ƒn:", data))  
Â Â .catch((error) => console.error("Error:", error));
```