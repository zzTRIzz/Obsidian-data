D∆∞·ªõi ƒë√¢y l√† gi·∫£i th√≠ch **chi ti·∫øt v√† ƒë·∫ßy ƒë·ªß** v·ªÅ c√°c kh√°i ni·ªám trong Spring, k√®m v√≠ d·ª• minh h·ªça, best practices, v√† c√°ch ch√∫ng ho·∫°t ƒë·ªông trong h·ªá sinh th√°i Spring:

---

### 1. **`@Component`**  
#### **Chi ti·∫øt:**  
- **Vai tr√≤:** ƒê√°nh d·∫•u l·ªõp l√† m·ªôt "bean" ƒë·ªÉ Spring qu·∫£n l√Ω.  
- **C∆° ch·∫ø:** Spring t·ª± ƒë·ªông ph√°t hi·ªán c√°c l·ªõp c√≥ `@Component` th√¥ng qua **component scanning** (qu√©t c√°c package ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh).  
- **Ph√¢n bi·ªát v·ªõi c√°c stereotype kh√°c:**  
  - `@Component` l√† annotation c∆° b·∫£n nh·∫•t.  
  - C√°c annotation nh∆∞ `@Controller`, `@Service`, `@Repository` ƒë·ªÅu k·∫ø th·ª´a t·ª´ `@Component` v√† c√≥ th√™m ch·ª©c nƒÉng chuy√™n bi·ªát.  

#### **V√≠ d·ª•:**  
```java
@Component // Bean name m·∫∑c ƒë·ªãnh: "myComponent" (t√™n l·ªõp vi·∫øt th∆∞·ªùng ch·ªØ c√°i ƒë·∫ßu)
public class MyComponent { 
    public void doSomething() {
        System.out.println("Do something!");
    }
}
```

#### **Khi n√†o d√πng?**  
- Khi b·∫°n c·∫ßn m·ªôt bean ƒë∆°n gi·∫£n, kh√¥ng thu·ªôc c√°c tr∆∞·ªùng h·ª£p chuy√™n bi·ªát (nh∆∞ controller, service, repository).  
- V√≠ d·ª•: Utility class, helper class, third-party integration.  

#### **Best Practices:**  
- ƒê·∫∑t t√™n bean r√µ r√†ng n·∫øu mu·ªën: `@Component("customName")`.  
- Kh√¥ng d√πng `@Component` cho c√°c l·ªõp nghi·ªáp v·ª• (thay b·∫±ng `@Service`) ho·∫∑c l·ªõp truy c·∫≠p d·ªØ li·ªáu (thay b·∫±ng `@Repository`).  

---

### 2. **`@Controller` (Spring MVC)**  
#### **Chi ti·∫øt:**  
- **M·ª•c ƒë√≠ch:** X·ª≠ l√Ω c√°c HTTP request t·ª´ client (tr√¨nh duy·ªát, ·ª©ng d·ª•ng mobile) v√† tr·∫£ v·ªÅ **view** (HTML, JSP, Thymeleaf).  
- **C∆° ch·∫ø ho·∫°t ƒë·ªông:**  
  - Nh·∫≠n request ‚Üí X·ª≠ l√Ω logic (g·ªçi service) ‚Üí Tr·∫£ v·ªÅ t√™n view ho·∫∑c redirect.  
  - S·ª≠ d·ª•ng `@RequestMapping`, `@GetMapping`, `@PostMapping` ƒë·ªÉ √°nh x·∫° URL.  

#### **V√≠ d·ª•:**  
```java
@Controller
public class HomeController {

    @GetMapping("/home")
    public String showHomePage(Model model) {
        model.addAttribute("message", "Ch√†o m·ª´ng ƒë·∫øn v·ªõi Spring!");
        return "home"; // Tr·∫£ v·ªÅ view home.html (t√πy v√†o template engine)
    }

    @PostMapping("/submit-form")
    public String handleForm(@RequestParam String username) {
        // X·ª≠ l√Ω d·ªØ li·ªáu form
        return "redirect:/home"; // Chuy·ªÉn h∆∞·ªõng
    }
}
```

#### **Best Practices:**  
- Kh√¥ng ƒë·∫∑t business logic tr·ª±c ti·∫øp trong controller ‚Üí G·ªçi `@Service`.  
- S·ª≠ d·ª•ng `Model` ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu t·ª´ controller sang view.  

---

### 3. **`@RestController` (REST API)**  
#### **Chi ti·∫øt:**  
- **Kh√°c bi·ªát v·ªõi `@Controller`:**  
  - T·ª± ƒë·ªông th√™m `@ResponseBody` v√†o m·ªçi ph∆∞∆°ng th·ª©c ‚Üí Tr·∫£ v·ªÅ JSON/XML thay v√¨ view.  
  - D√πng ƒë·ªÉ x√¢y d·ª±ng **RESTful API**.  

#### **V√≠ d·ª•:**  
```java
@RestController
@RequestMapping("/api/users")
public class UserApiController {

    @Autowired
    private UserService userService;

    @GetMapping
    public List<User> getAllUsers() {
        return userService.findAllUsers(); // Tr·∫£ v·ªÅ JSON
    }

    @PostMapping
    public ResponseEntity<User> createUser(@RequestBody User user) {
        User savedUser = userService.saveUser(user);
        return ResponseEntity.created(URI.create("/users/" + savedUser.getId())).body(savedUser);
    }
}
```

#### **HTTP Status Codes:**  
- S·ª≠ d·ª•ng `ResponseEntity` ƒë·ªÉ t√πy ch·ªânh HTTP status code (200 OK, 201 Created, 404 Not Found).  

---

### 4. **`@Service`**  
#### **Chi ti·∫øt:**  
- **Vai tr√≤:** ƒê√≥ng g√≥i **business logic** (nghi·ªáp v·ª• ·ª©ng d·ª•ng).  
- **T·∫°i sao c·∫ßn `@Service`?**  
  - Ph√¢n t√°ch r√µ r√†ng gi·ªØa controller (x·ª≠ l√Ω request) v√† service (x·ª≠ l√Ω logic).  
  - D·ªÖ d√†ng √°p d·ª•ng transaction management (`@Transactional`).  

#### **V√≠ d·ª•:**  
```java
@Service
public class UserService {

    @Autowired
    private UserRepository userRepository;

    @Transactional
    public User createUser(User user) {
        // Validate d·ªØ li·ªáu
        if (user.getEmail() == null) {
            throw new IllegalArgumentException("Email kh√¥ng ƒë∆∞·ª£c tr·ªëng!");
        }
        return userRepository.save(user);
    }
}
```

#### **Best Practices:**  
- ƒê·∫∑t t√™n service theo quy ∆∞·ªõc: `UserService`, `PaymentService`.  
- S·ª≠ d·ª•ng `@Transactional` cho c√°c ph∆∞∆°ng th·ª©c thay ƒë·ªïi d·ªØ li·ªáu.  

---

### 5. **`@Repository`**  
#### **Chi ti·∫øt:**  
- **Vai tr√≤:** L√†m vi·ªác v·ªõi database (CRUD operations).  
- **Spring Data JPA Integration:**  
  - Khi d√πng v·ªõi Spring Data JPA, c√≥ th·ªÉ k·∫ø th·ª´a `JpaRepository` ƒë·ªÉ t·ª± ƒë·ªông tri·ªÉn khai c√°c ph∆∞∆°ng th·ª©c nh∆∞ `findAll()`, `save()`.  
- **Exception Translation:**  
  - Spring chuy·ªÉn c√°c exception t·ª´ JDBC/Hibernate th√†nh `DataAccessException` (d·ªÖ x·ª≠ l√Ω h∆°n).  

#### **V√≠ d·ª•:**  
```java
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    // T·ª± ƒë·ªông tri·ªÉn khai ph∆∞∆°ng th·ª©c
    List<User> findByEmail(String email);
}
```

#### **Best Practices:**  
- S·ª≠ d·ª•ng `@Repository` ngay c·∫£ khi k·∫ø th·ª´a `JpaRepository` (ƒë·ªÉ k√≠ch ho·∫°t exception translation).  

---

### 6. **`@Configuration`**  
#### **Chi ti·∫øt:**  
- **M·ª•c ƒë√≠ch:** Khai b√°o bean th·ªß c√¥ng (thay v√¨ d√πng component scanning).  
- **C√°ch ho·∫°t ƒë·ªông:**  
  - C√°c ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c ƒë√°nh d·∫•u `@Bean` tr·∫£ v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c qu·∫£n l√Ω b·ªüi Spring.  
  - Th∆∞·ªùng d√πng ƒë·ªÉ c·∫•u h√¨nh third-party libraries (v√≠ d·ª•: Datasource, RestTemplate).  

#### **V√≠ d·ª•:**  
```java
@Configuration
public class AppConfig {

    @Bean
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }

    @Bean
    public DataSource dataSource() {
        return new HikariDataSource(); // C·∫•u h√¨nh connection pool
    }
}
```

#### **L∆∞u √Ω:**  
- `@Configuration` classes ƒë∆∞·ª£c x·ª≠ l√Ω b·∫±ng CGLIB proxy ƒë·ªÉ ƒë·∫£m b·∫£o c√°c `@Bean` ch·ªâ ƒë∆∞·ª£c t·∫°o m·ªôt l·∫ßn.  

---

### 7. **`@ControllerAdvice`**  
#### **Chi ti·∫øt:**  
- **Vai tr√≤:** X·ª≠ l√Ω exception **to√†n c·ª•c** cho t·∫•t c·∫£ c√°c controller.  
- **Ph·∫°m vi:**  
  - M·∫∑c ƒë·ªãnh √°p d·ª•ng cho m·ªçi controller.  
  - C√≥ th·ªÉ gi·ªõi h·∫°n ph·∫°m vi b·∫±ng `@ControllerAdvice(annotations = RestController.class)`.  

#### **V√≠ d·ª•:**  
```java
@ControllerAdvice
public class GlobalExceptionHandler {

    // X·ª≠ l√Ω UserNotFoundException
    @ExceptionHandler(UserNotFoundException.class)
    @ResponseStatus(HttpStatus.NOT_FOUND)
    public ResponseEntity<ErrorResponse> handleUserNotFound(UserNotFoundException ex) {
        ErrorResponse error = new ErrorResponse(404, ex.getMessage());
        return new ResponseEntity<>(error, HttpStatus.NOT_FOUND);
    }

    // X·ª≠ l√Ω m·ªçi exception ch∆∞a ƒë∆∞·ª£c khai b√°o
    @ExceptionHandler(Exception.class)
    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
    public ResponseEntity<ErrorResponse> handleGenericException(Exception ex) {
        ErrorResponse error = new ErrorResponse(500, "L·ªói server!");
        return new ResponseEntity<>(error, HttpStatus.INTERNAL_SERVER_ERROR);
    }
}
```

#### **Best Practices:**  
- Ph√¢n lo·∫°i exception c·ª• th·ªÉ (v√≠ d·ª•: validation exception, database exception).  
- Tr·∫£ v·ªÅ error response th·ªëng nh·∫•t (d·∫°ng JSON).  

---

### 8. **`@ConfigurationProperties`**  
#### **Chi ti·∫øt:**  
- **M·ª•c ƒë√≠ch:** ƒê·ªçc gi√° tr·ªã t·ª´ file c·∫•u h√¨nh (`application.properties`/`application.yml`) v√†o Java object.  
- **C√°ch d√πng:**  
  - ƒê√°nh d·∫•u l·ªõp b·∫±ng `@ConfigurationProperties(prefix = "prefix")`.  
  - K√≠ch ho·∫°t b·∫±ng `@EnableConfigurationProperties` trong l·ªõp `@Configuration`.  

#### **V√≠ d·ª•:**  
```java
@ConfigurationProperties(prefix = "app")
public class AppConfigProperties {
    private String name;
    private int version;
    private Database database; // L·ªìng class

    // Getter & Setter

    public static class Database {
        private String url;
        private String username;
        // Getter & Setter
    }
}

// Trong application.yml:
app:
  name: MyApp
  version: 1
  database:
    url: jdbc:mysql://localhost:3306/mydb
    username: root
```

#### **Best Practices:**  
- S·ª≠ d·ª•ng `@Validated` ƒë·ªÉ validate d·ªØ li·ªáu (v√≠ d·ª•: `@NotBlank`, `@Min`).  

---

### 9. **`@SpringBootApplication` (L·ªõp ch√≠nh)**  
#### **Chi ti·∫øt:**  
- **Vai tr√≤:** L√† ƒëi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa ·ª©ng d·ª•ng Spring Boot.  
- **Ba annotation h·ª£p th√†nh:**  
  1. `@Configuration`: ƒê·ªãnh nghƒ©a bean.  
  2. `@EnableAutoConfiguration`: T·ª± ƒë·ªông c·∫•u h√¨nh d·ª±a tr√™n dependencies.  
  3. `@ComponentScan`: Qu√©t c√°c component trong package hi·ªán t·∫°i v√† sub-packages.  

#### **V√≠ d·ª•:**  
```java
@SpringBootApplication
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}
```

#### **C·∫•u h√¨nh n√¢ng cao:**  
- Th√™m `@EntityScan` ƒë·ªÉ ch·ªâ ƒë·ªãnh package ch·ª©a JPA entities.  
- D√πng `@EnableJpaRepositories` ƒë·ªÉ ch·ªâ ƒë·ªãnh package ch·ª©a repositories.  

---

### **S∆° ƒë·ªì lu·ªìng d·ªØ li·ªáu trong Spring:**  
```
Client ‚Üí Controller(API) ‚Üí Service(Logic) ‚Üí Repository ‚Üí Database  
                             ‚Üë  
                  Configuration & External Services
```

### **T·ªïng k·∫øt:**  
- **Controller:** X·ª≠ l√Ω request/response.  
- **Service:** Ch·ª©a business logic.  
- **Repository:** Giao ti·∫øp v·ªõi database.  
- **C√°c annotation kh√°c:** H·ªó tr·ª£ c·∫•u h√¨nh, x·ª≠ l√Ω ngo·∫°i l·ªá, qu·∫£n l√Ω bean.  

N·∫øu b·∫°n c·∫ßn gi·∫£i th√≠ch th√™m v·ªÅ b·∫•t k·ª≥ ph·∫ßn n√†o, h√£y h·ªèi nh√©! üòä