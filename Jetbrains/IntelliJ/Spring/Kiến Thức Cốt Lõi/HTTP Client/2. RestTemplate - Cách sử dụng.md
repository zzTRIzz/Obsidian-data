D∆∞·ªõi ƒë√¢y l√† h∆∞·ªõng d·∫´n chi ti·∫øt c√°ch s·ª≠ d·ª•ng **RestTemplate** trong Spring Boot, k√®m v√≠ d·ª• t·ª´ c∆° b·∫£n ƒë·∫øn n√¢ng cao:

---

### **1. Thi·∫øt l·∫≠p d·ª± √°n Spring Boot**
Th√™m dependency v√†o `pom.xml` (Maven):
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
```

---

### **2. C·∫•u h√¨nh RestTemplate**
T·∫°o m·ªôt `@Bean` RestTemplate trong class c·∫•u h√¨nh:
```java
import org.springframework.context.annotation.Bean;
import org.springframework.web.client.RestTemplate;

@Configuration
public class AppConfig {
    @Bean
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}
```

---

### **3. S·ª≠ d·ª•ng RestTemplate trong Service**
#### **V√≠ d·ª•: G·ªçi API GET**
```java
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

@Service
public class UserService {
    private final RestTemplate restTemplate;
    private static final String API_URL = "https://jsonplaceholder.typicode.com/users";

    public UserService(RestTemplate restTemplate) {
        this.restTemplate = restTemplate;
    }

    // L·∫•y th√¥ng tin user b·∫±ng GET
    public User getUserById(Long id) {
        String url = API_URL + "/" + id;
        return restTemplate.getForObject(url, User.class); // Tr·∫£ v·ªÅ ƒë·ªëi t∆∞·ª£ng User
    }

    // L·∫•y c·∫£ th√¥ng tin chi ti·∫øt (status code, headers)
    public ResponseEntity<User> getUserDetail(Long id) {
        String url = API_URL + "/" + id;
        return restTemplate.getForEntity(url, User.class); // Tr·∫£ v·ªÅ ResponseEntity
    }
}
```

#### **V√≠ d·ª•: G·ªçi API POST**
```java
public User createUser(User user) {
    return restTemplate.postForObject(API_URL, user, User.class);
}

// Ho·∫∑c v·ªõi headers t√πy ch·ªânh
public ResponseEntity<User> createUserWithHeader(User user) {
    HttpHeaders headers = new HttpHeaders();
    headers.set("Authorization", "Bearer token123");
    HttpEntity<User> request = new HttpEntity<>(user, headers);
    return restTemplate.postForEntity(API_URL, request, User.class);
}
```

#### **V√≠ d·ª•: G·ªçi API PUT v√† DELETE**
```java
public void updateUser(Long id, User user) {
    String url = API_URL + "/" + id;
    restTemplate.put(url, user); // G·ª≠i HTTP PUT
}

public void deleteUser(Long id) {
    String url = API_URL + "/" + id;
    restTemplate.delete(url); // G·ª≠i HTTP DELETE
}
```

---

### **4. X·ª≠ l√Ω l·ªói**
B·∫Øt c√°c exception ph·ªï bi·∫øn:
```java
try {
    User user = restTemplate.getForObject(url, User.class);
} catch (HttpClientErrorException e) {
    // X·ª≠ l√Ω l·ªói 4xx (v√≠ d·ª•: 404 Not Found)
    System.err.println("Client error: " + e.getStatusCode());
} catch (HttpServerErrorException e) {
    // X·ª≠ l√Ω l·ªói 5xx (v√≠ d·ª•: 500 Internal Server Error)
    System.err.println("Server error: " + e.getStatusCode());
}
```

---

### **5. T√πy ch·ªânh RestTemplate**
Th√™m interceptor ho·∫∑c timeout:
```java
@Bean
public RestTemplate restTemplate() {
    RestTemplate restTemplate = new RestTemplate();

    // Th√™m interceptor (v√≠ d·ª•: log request)
    restTemplate.getInterceptors().add((request, body, execution) -> {
        System.out.println("Request URI: " + request.getURI());
        return execution.execute(request, body);
    });

    // C·∫•u h√¨nh timeout
    SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();
    factory.setConnectTimeout(5000); // 5 gi√¢y
    factory.setReadTimeout(5000);
    restTemplate.setRequestFactory(factory);

    return restTemplate;
}
```

---

### **6. Chuy·ªÉn ƒë·ªïi d·ªØ li·ªáu t·ª± ƒë·ªông**
RestTemplate s·ª≠ d·ª•ng `HttpMessageConverter` ƒë·ªÉ chuy·ªÉn ƒë·ªïi JSON ‚Üî Java Object. ƒê·∫£m b·∫£o class `User` c√≥ getter/setter:
```java
public class User {
    private Long id;
    private String name;
    private String email;
    // Getter v√† Setter (b·∫Øt bu·ªôc)
}
```

---

### **7. G·ªçi API v·ªõi tham s·ªë ƒë·ªông**
S·ª≠ d·ª•ng `UriComponentsBuilder` ƒë·ªÉ x√¢y d·ª±ng URL:
```java
String url = UriComponentsBuilder
    .fromHttpUrl("https://api.example.com/search")
    .queryParam("name", "John")
    .queryParam("age", 30)
    .encode()
    .toUriString();

User[] users = restTemplate.getForObject(url, User[].class);
```

---

### **L∆∞u √Ω quan tr·ªçng**
- **Spring Boot 3+**: RestTemplate kh√¥ng ƒë∆∞·ª£c khuy·∫øn ngh·ªã, h√£y d√πng **WebClient** (reactive/non-blocking).
- **ƒê·ªìng b·ªô**: RestTemplate block thread ƒë·∫øn khi nh·∫≠n ph·∫£n h·ªìi, kh√¥ng ph√π h·ª£p cho high-performance.

---

### **V√≠ d·ª• ho√†n ch·ªânh**
Gi·∫£ s·ª≠ b·∫°n c√≥ l·ªõp `User` v√† mu·ªën g·ªçi API t·ª´ [JSONPlaceholder](https://jsonplaceholder.typicode.com):

```java
// Service class
public class UserService {
    // ... (code nh∆∞ tr√™n)

    public static void main(String[] args) {
        RestTemplate restTemplate = new RestTemplate();
        User user = restTemplate.getForObject(
            "https://jsonplaceholder.typicode.com/users/1", 
            User.class
        );
        System.out.println("User name: " + user.getName());
    }
}
```

---

### **T√†i nguy√™n tham kh·∫£o**
- [Spring RestTemplate Docs](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html)
- [JSONPlaceholder - Fake REST API](https://jsonplaceholder.typicode.com)

Ch√∫c b·∫°n th√†nh c√¥ng! üòä