ƒê·ªÉ t√≠ch h·ª£p **Amazon Bedrock Converse API** v√†o ·ª©ng d·ª•ng Spring AI c·ªßa b·∫°n, h√£y l√†m theo c√°c b∆∞·ªõc chi ti·∫øt sau:

---

### **1. Thi·∫øt L·∫≠p M√¥i Tr∆∞·ªùng AWS**
1. **C√†i ƒê·∫∑t AWS CLI**:
   ```bash
   curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
   unzip awscliv2.zip
   sudo ./aws/install
   ```
2. **C·∫•u H√¨nh AWS Credentials**:
   ```bash
   aws configure
   # Nh·∫≠p Access Key, Secret Key, Region (v√≠ d·ª•: us-east-1)
   ```

---

### **2. Th√™m Dependency v√†o Project**
**Maven**:
```xml
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-starter-model-bedrock-converse</artifactId>
</dependency>
```

**Gradle**:
```groovy
implementation 'org.springframework.ai:spring-ai-starter-model-bedrock-converse'
```

---

### **3. C·∫•u H√¨nh Trong `application.properties`**
```properties
# AWS Credentials
spring.ai.bedrock.aws.region=us-east-1
spring.ai.bedrock.aws.access-key=${AWS_ACCESS_KEY}
spring.ai.bedrock.aws.secret-key=${AWS_SECRET_KEY}

# Model Settings
spring.ai.model.chat=bedrock-converse
spring.ai.bedrock.converse.chat.options.model=anthropic.claude-3-sonnet-20240229-v1:0
spring.ai.bedrock.converse.chat.options.temperature=0.7
spring.ai.bedrock.converse.chat.options.max-tokens=500
```

---

### **4. Tri·ªÉn Khai ChatClient**
#### **4.1. Chat ƒê·ªìng B·ªô**
```java
@RestController
public class ChatController {

    private final ChatClient chatClient;

    @Autowired
    public ChatController(ChatClient.Builder builder) {
        this.chatClient = builder.build();
    }

    @GetMapping("/chat")
    public Map<String, String> chat(@RequestParam String message) {
        return Map.of("response", chatClient.prompt(message).call().content());
    }
}
```

#### **4.2. Streaming**
```java
@GetMapping("/chat/stream")
public Flux<String> streamChat(@RequestParam String message) {
    return chatClient.prompt(message).stream().content();
}
```

---

### **5. V√≠ D·ª• G·ªçi H√†m (Tool Calling)**
**ƒê·ªãnh Nghƒ©a H√†m**:
```java
public class WeatherService {
    @Tool(description = "Get the weather in location")
    public String getWeather(@ToolParam(description = "City name") String city) {
        return "Sunny, 25¬∞C in " + city;
    }
}
```

**S·ª≠ D·ª•ng Trong ChatClient**:
```java
@Autowired
private WeatherService weatherService;

@GetMapping("/weather")
public String getWeather(@RequestParam String city) {
    return ChatClient.create(chatModel)
        .prompt("What's the weather in " + city + "?")
        .tools(weatherService)
        .call()
        .content();
}
```

---

### **6. V√≠ D·ª• X·ª≠ L√Ω ƒêa Ph∆∞∆°ng Th·ª©c**
**X·ª≠ L√Ω H√¨nh ·∫¢nh**:
```java
@GetMapping("/analyze-image")
public String analyzeImage() {
    return ChatClient.create(chatModel)
        .prompt()
        .user(u -> u.text("Describe this image")
            .media(Media.Format.IMAGE_PNG, new ClassPathResource("/test.png")))
        .call()
        .content();
}
```

**X·ª≠ L√Ω Video**:
```java
@GetMapping("/analyze-video")
public String analyzeVideo() {
    return ChatClient.create(chatModel)
        .prompt()
        .user(u -> u.text("Summarize this video")
            .media(Media.Format.VIDEO_MP4, new ClassPathResource("/demo.mp4")))
        .call()
        .content();
}
```

---

### **7. Best Practices**
- **B·∫£o M·∫≠t**: S·ª≠ d·ª•ng AWS Session Token cho credentials t·∫°m th·ªùi.
- **Qu·∫£n L√Ω Token**: Theo d√µi token usage qua `ChatResponse.getMetadata()`.
- **X·ª≠ L√Ω L·ªói**:
  ```java
  try {
      chatClient.call(prompt);
  } catch (AiClientException e) {
      logger.error("Error from Bedrock: {}", e.getMessage());
  }
  ```

---

### **8. So S√°nh C√°c Model Tr√™n Bedrock**
| Model               | ƒêa Ph∆∞∆°ng Th·ª©c       | G·ªçi H√†m | Streaming |
|---------------------|----------------------|---------|-----------|
| **Anthropic Claude**| Text, PDF, H√¨nh ·∫£nh | ‚úîÔ∏è      | ‚úîÔ∏è        |
| **Amazon Titan**    | Text, H√¨nh ·∫£nh      | ‚úîÔ∏è      | ‚úîÔ∏è        |
| **Mistral AI**      | Text                 | ‚úîÔ∏è      | ‚úîÔ∏è        |
| **Meta Llama**      | Text                 | ‚ùå      | ‚úîÔ∏è        |

---

### **K·∫øt Lu·∫≠n**
Amazon Bedrock Converse API cung c·∫•p gi·∫£i ph√°p m·∫°nh m·∫Ω ƒë·ªÉ t√≠ch h·ª£p c√°c model AI ƒëa ph∆∞∆°ng th·ª©c v√†o ·ª©ng d·ª•ng Spring. B·∫±ng c√°ch l√†m theo c√°c b∆∞·ªõc tr√™n, b·∫°n c√≥ th·ªÉ:
- **G·ªçi h√†m** ƒë·ªÉ m·ªü r·ªông ch·ª©c nƒÉng.
- **X·ª≠ l√Ω ƒëa ph∆∞∆°ng th·ª©c** (h√¨nh ·∫£nh, video, t√†i li·ªáu).
- **Streaming** ph·∫£n h·ªìi th·ªùi gian th·ª±c.

H√£y b·∫Øt ƒë·∫ßu v·ªõi v√≠ d·ª• ƒë∆°n gi·∫£n v√† d·∫ßn m·ªü r·ªông ƒë·ªÉ kh√°m ph√° to√†n b·ªô ti·ªÅm nƒÉng c·ªßa Spring AI v√† Amazon Bedrock! üöÄ