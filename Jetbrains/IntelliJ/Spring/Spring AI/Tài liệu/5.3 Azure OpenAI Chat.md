Äá»ƒ tÃ­ch há»£p **Azure OpenAI Chat** vÃ o á»©ng dá»¥ng Spring AI cá»§a báº¡n, hÃ£y lÃ m theo cÃ¡c bÆ°á»›c chi tiáº¿t sau:

---

### **1. Thiáº¿t Láº­p Azure OpenAI**
1. **Táº¡o TÃ i NguyÃªn TrÃªn Azure**:
   - Truy cáº­p [Azure Portal](https://portal.azure.com) vÃ  táº¡o má»™t **Azure OpenAI Service**.
   - Láº¥y **API Key** vÃ  **Endpoint URL** tá»« má»¥c **Keys and Endpoint** trong tÃ i nguyÃªn vá»«a táº¡o.

2. **Táº¡o Deployment Model**:
   - Trong Azure AI Studio, táº¡o má»™t deployment vá»›i tÃªn (vÃ­ dá»¥: `gpt-4o`) vÃ  chá»n model phÃ¹ há»£p (vÃ­ dá»¥: GPT-4o).

---

### **2. ThÃªm Dependency vÃ o Project**
**Maven**:
```xml
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-starter-model-azure-openai</artifactId>
</dependency>
```

**Gradle**:
```groovy
implementation 'org.springframework.ai:spring-ai-starter-model-azure-openai'
```

---

### **3. Cáº¥u HÃ¬nh Trong `application.properties`**
```properties
# Azure OpenAI Credentials
spring.ai.azure.openai.api-key=${AZURE_OPENAI_API_KEY}
spring.ai.azure.openai.endpoint=${AZURE_OPENAI_ENDPOINT}

# Model Settings
spring.ai.model.chat=azure-openai
spring.ai.azure.openai.chat.options.deployment-name=gpt-4o
spring.ai.azure.openai.chat.options.temperature=0.7
spring.ai.azure.openai.chat.options.max-tokens=500
```

---

### **4. Triá»ƒn Khai ChatClient**
#### **4.1. Chat Äá»“ng Bá»™**
```java
@RestController
public class ChatController {

    private final ChatClient chatClient;

    @Autowired
    public ChatController(ChatClient.Builder builder) {
        this.chatClient = builder.build();
    }

    @GetMapping("/chat")
    public Map<String, String> chat(@RequestParam String message) {
        return Map.of("response", chatClient.prompt(message).call().content());
    }
}
```

#### **4.2. Streaming**
```java
@GetMapping("/chat/stream")
public Flux<String> streamChat(@RequestParam String message) {
    return chatClient.prompt(message).stream().content();
}
```

---

### **5. VÃ­ Dá»¥ Gá»i HÃ m (Function Calling)**
**Äá»‹nh NghÄ©a HÃ m**:
```java
public class WeatherService {
    @Tool(description = "Get the weather in location")
    public String getWeather(@ToolParam(description = "City name") String city) {
        return "Sunny, 25Â°C in " + city;
    }
}
```

**Sá»­ Dá»¥ng Trong ChatClient**:
```java
@Autowired
private WeatherService weatherService;

@GetMapping("/weather")
public String getWeather(@RequestParam String city) {
    return ChatClient.create(chatModel)
        .prompt("What's the weather in " + city + "?")
        .tools(weatherService)
        .call()
        .content();
}
```

---

### **6. VÃ­ Dá»¥ Xá»­ LÃ½ Äa PhÆ°Æ¡ng Thá»©c**
**Xá»­ LÃ½ HÃ¬nh áº¢nh**:
```java
@GetMapping("/analyze-image")
public String analyzeImage() {
    return ChatClient.create(chatModel)
        .prompt()
        .user(u -> u.text("Describe this image")
            .media(Media.Format.IMAGE_PNG, new ClassPathResource("/test.png")))
        .call()
        .content();
}
```

**Xá»­ LÃ½ Video**:
```java
@GetMapping("/analyze-video")
public String analyzeVideo() {
    return ChatClient.create(chatModel)
        .prompt()
        .user(u -> u.text("Summarize this video")
            .media(Media.Format.VIDEO_MP4, new ClassPathResource("/demo.mp4")))
        .call()
        .content();
}
```

---

### **7. Best Practices**
- **Báº£o Máº­t**: Sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng Ä‘á»ƒ lÆ°u trá»¯ API Key.
- **Quáº£n LÃ½ Token**: Theo dÃµi token usage qua `ChatResponse.getMetadata()`.
- **Xá»­ LÃ½ Lá»—i**:
  ```java
  try {
      chatClient.call(prompt);
  } catch (AiClientException e) {
      logger.error("Error from Azure OpenAI: {}", e.getMessage());
  }
  ```

---

### **8. TÃ¹y Chá»‰nh HTTP Client**
```java
@Configuration
public class AzureOpenAiConfig {

    @Bean
    public AzureOpenAIClientBuilderCustomizer httpClientCustomizer() {
        return builder -> {
            HttpClientOptions clientOptions = new HttpClientOptions()
                .setResponseTimeout(Duration.ofMinutes(5));
            builder.httpClient(HttpClient.createDefault(clientOptions));
        };
    }
}
```

---

### **9. So SÃ¡nh CÃ¡c Model TrÃªn Azure**
| Model          | Äa PhÆ°Æ¡ng Thá»©c | Gá»i HÃ m | Streaming |
|----------------|----------------|---------|-----------|
| **GPT-4o**     | âœ”ï¸ (HÃ¬nh áº£nh) | âœ”ï¸      | âœ”ï¸        |
| **GPT-3.5**    | âŒ             | âœ”ï¸      | âœ”ï¸        |

---

### **Káº¿t Luáº­n**
Azure OpenAI Chat cung cáº¥p giáº£i phÃ¡p máº¡nh máº½ Ä‘á»ƒ tÃ­ch há»£p cÃ¡c model AI vÃ o á»©ng dá»¥ng Spring. Báº±ng cÃ¡ch lÃ m theo cÃ¡c bÆ°á»›c trÃªn, báº¡n cÃ³ thá»ƒ:
- **Gá»i hÃ m** Ä‘á»ƒ má»Ÿ rá»™ng chá»©c nÄƒng.
- **Xá»­ lÃ½ Ä‘a phÆ°Æ¡ng thá»©c** (hÃ¬nh áº£nh, video).
- **Streaming** pháº£n há»“i thá»i gian thá»±c.

HÃ£y báº¯t Ä‘áº§u vá»›i vÃ­ dá»¥ Ä‘Æ¡n giáº£n vÃ  dáº§n má»Ÿ rá»™ng Ä‘á»ƒ khÃ¡m phÃ¡ toÃ n bá»™ tiá»m nÄƒng cá»§a Spring AI vÃ  Azure OpenAI! ğŸš€